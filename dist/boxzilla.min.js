!function e(t,i,n){function o(s,c){if(!i[s]){if(!t[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){var i=t[s][1][e];return o(i?i:e)},h,h.exports,e,t,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,i){(function(){"use strict";function e(){}function i(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var o=e.prototype,r=this,s=r.EventEmitter;o.getListeners=function(e){var t,i,n=this._getEvents();if(e instanceof RegExp){t={};for(i in n)n.hasOwnProperty(i)&&e.test(i)&&(t[i]=n[i])}else t=n[e]||(n[e]=[]);return t},o.flattenListeners=function(e){var t,i=[];for(t=0;t<e.length;t+=1)i.push(e[t].listener);return i},o.getListenersAsObject=function(e){var t,i=this.getListeners(e);return i instanceof Array&&(t={},t[e]=i),t||i},o.addListener=function(e,t){var n,o=this.getListenersAsObject(e),r="object"==typeof t;for(n in o)o.hasOwnProperty(n)&&-1===i(o[n],t)&&o[n].push(r?t:{listener:t,once:!1});return this},o.on=n("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=n("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var n,o,r=this.getListenersAsObject(e);for(o in r)r.hasOwnProperty(o)&&(n=i(r[o],t),-1!==n&&r[o].splice(n,1));return this},o.off=n("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,i){var n,o,r=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(n=i.length;n--;)r.call(this,t,i[n]);else for(n in t)t.hasOwnProperty(n)&&(o=t[n])&&("function"==typeof o?r.call(this,n,o):s.call(this,n,o));return this},o.removeEvent=function(e){var t,i=typeof e,n=this._getEvents();if("string"===i)delete n[e];else if(e instanceof RegExp)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},o.removeAllListeners=n("removeEvent"),o.emitEvent=function(e,t){var i,n,o,r,s,c=this.getListenersAsObject(e);for(r in c)if(c.hasOwnProperty(r))for(i=c[r].slice(0),o=i.length;o--;)n=i[o],n.once===!0&&this.removeListener(e,n.listener),s=n.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},o.trigger=n("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},o._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return r.EventEmitter=s,e},"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof t&&t.exports?t.exports=e:r.EventEmitter=e}).call(this)},{}],2:[function(e,t,i){"use strict";function n(e,t,i,n){var o=+new Date,r=window.getComputedStyle(e),s=parseFloat(r[t]),c=(i-s)/500;console.log("Now: "+s),console.log("Step: "+c);var a=function(){var r="height"==t?"px":"",l=parseFloat(e.style[t])||s,h=c*(new Date-o),u=l+h,f=!1;(c>0&&u>i||0>c&&i>u)&&(u=i,f=!0),e.style[t]=u+r,o=+new Date,f?n&&n():window.requestAnimationFrame&&requestAnimationFrame(a)||setTimeout(a,16)};a()}function o(e,t){var i={};for(var n in e)i[n]=e[n];for(var n in t)i[n]=t[n];return i}var r,s={animation:"fade",rehide:!1,content:"",cookieTime:0,icon:"&times",minimumScreenWidth:0,position:"center",testMode:!1,trigger:!1,closable:!0},c=function(e,t){this.id=e,this.config=o(s,t),this.overlay=document.getElementById("boxzilla-overlay"),this.visible=!1,this.closed=!1,this.triggered=!1,this.triggerHeight=0,this.cookieSet=!1,this.config.trigger&&("percentage"!==this.config.trigger.method&&"element"!==this.config.trigger.method||(this.triggerHeight=this.calculateTriggerHeight()),this.cookieSet=this.isCookieSet()),this.element=this.dom(),this.events()};c.prototype.events=function(){var e=this;this.element.querySelector(".boxzilla-close-icon").addEventListener("click",e.dismiss.bind(this)),this.element.addEventListener("click",function(t){"A"===t.target.tagName&&r.trigger("box.interactions.link",[e,t.target])},!1),this.element.addEventListener("submit",function(t){e.setCookie(),r.trigger("box.interactions.form",[e,t.target])},!1),document.body.addEventListener("click",function(t){var i="#boxzilla-"+e.id;"A"===t.target.tagName&&t.target.getAttribute("href").substring(-i.length)===i&&(e.toggle(),t.preventDefault())},!1),this.fits()&&this.locationHashRefersBox()&&window.addEventListener("load",this.show.bind(this))},c.prototype.dom=function(){var e=document.createElement("div");e.className="boxzilla-container boxzilla-"+this.config.position+"-container";var t=document.createElement("div");t.setAttribute("id","boxzilla-"+this.id),t.className="boxzilla boxzilla-"+this.id+" boxzilla-"+this.config.position,t.style.display="none",e.appendChild(t);var i=document.createElement("div");i.className="boxzilla-content",i.innerHTML=this.config.content,t.appendChild(i);var n=i.querySelectorAll("script");if(n.length){for(var o=document.createElement("script"),r=0;r<n.length;r++)o.appendChild(document.createTextNode(n[r].text)),n[r].parentNode.removeChild(n[r]);document.body.appendChild(o)}if(this.config.closable&&this.config.icon){var s=document.createElement("span");s.className="boxzilla-close-icon",s.innerHTML=this.config.icon,t.appendChild(s)}return document.body.appendChild(e),t},c.prototype.setCustomBoxStyling=function(){this.element.style.overflowY="auto",this.element.style.maxHeight="none";var e=window.innerHeight,t=this.element.clientHeight;if(t>e&&(this.element.style.maxHeight=e+"px",this.element.style.overflowY="scroll"),"center"===this.config.position){var i=(e-t)/2;i=i>=0?i:0,this.element.style.marginTop=i+"px"}},c.prototype.toggle=function(e){if("undefined"==typeof e&&(e=!this.visible),e===this.visible)return!1;if(!e&&!this.config.closable)return!1;if(this.visible=e,this.setCustomBoxStyling(),r.trigger("box."+(e?"show":"hide"),[this]),this.visible){this.element.style.display="";var t=this.element.clientHeight;"center"===this.config.position&&(this.overlay.style.display="block",this.overlay.style.opacity=0,n(this.overlay,"opacity",1)),"fade"==this.config.animation?(this.element.style.opacity=0,n(this.element,"opacity",1)):(this.element.style.height=0,n(this.element,"height",t))}else{var i=function(){this.style.display="none"};"fade"==this.config.animation?n(this.element,"opacity",0,i.bind(this.element)):(this.element.style.boxSizing="border-box",n(this.element,"height",0,i.bind(this.element))),"center"===this.config.position&&n(this.overlay,"opacity",0,i.bind(this.overlay))}var o=this.element.querySelector("input, textarea");return o&&o.focus(),!0},c.prototype.show=function(){return this.toggle(!0)},c.prototype.hide=function(){return this.toggle(!1)},c.prototype.calculateTriggerHeight=function(){var e=0;if("element"===this.config.trigger.method){var t=document.body.querySelector(this.config.trigger.value);if(t){var i=t.getBoundingClientRect();e=i.top}}else"percentage"===this.config.trigger.method&&(e=this.config.trigger.value/100*document.clientHeight);return e},c.prototype.setCookie=function(){if(this.config.cookieTime){var e=new Date;e.setDate(e.getDate()+this.config.cookieTime),document.cookie="boxzilla_box_"+this.id+"=true; expires="+e.toUTCString()+"; path=/"}},c.prototype.locationHashRefersBox=function(){if(!window.location.hash||0===window.location.hash.length)return!1;var e=window.location.hash.substring(1);return e===this.element.id?!0:!!this.element.querySelector("#"+e)},c.prototype.fits=function(){return this.config.minimumScreenWidth<=0?!0:window.innerWidth>this.config.minimumScreenWidth},c.prototype.mayAutoShow=function(){return this.closed?!1:this.fits()&&this.config.trigger?!this.cookieSet:!1},c.prototype.mayRehide=function(){return this.config.rehide&&this.triggered},c.prototype.isCookieSet=function(){if(this.config.testMode)return!1;if(!this.config.cookieTime)return!1;var e="true"===document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*boxzilla_box_"+this.id+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");return e},c.prototype.trigger=function(){var e=this.show();e&&(this.triggered=!0)},c.prototype.dismiss=function(){this.hide(),this.setCookie(),this.closed=!0,r.trigger("box.dismiss",[this])},t.exports=function(e){return r=e,c}},{}],3:[function(e,t,i){"use strict";function n(e,t){for(var i in e)e.hasOwnProperty(i)&&t(e[i])}function o(e,t,i){t||(t=250);var n,o;return function(){var r=i||this,s=+new Date,c=arguments;n&&n+t>s?(clearTimeout(o),o=setTimeout(function(){n=s,e.apply(r,c)},t)):(n=s,e.apply(r,c))}}function r(e){27==e.keyCode&&v.dismiss()}function s(){n(b,function(e){e.mayAutoShow()&&"pageviews"===e.config.trigger.method&&_>=e.config.trigger.value&&e.trigger()})}function c(){n(b,function(e){e.mayAutoShow()&&("time_on_site"===e.config.trigger.method&&L.time>=e.config.trigger.value&&e.trigger(),"time_on_page"===e.config.trigger.method&&S.time>=e.config.trigger.value&&e.trigger())})}function a(){var e=window.scrollY,t=e+.667*x;n(b,function(e){!e.mayAutoShow()||e.triggerHeight<=0||(t>e.triggerHeight?e.trigger():e.mayRehide()&&e.hide())})}function l(){x=window.innerHeight,n(b,function(e){e.setCustomBoxStyling()})}function h(e){var t=e.offsetX,i=e.offsetY;n(b,function(e){var n=e.element.getBoundingClientRect(),o=100+.05*window.innerWidth;(t<n.left-o||t>n.right+o||i<n.top-o||i>n.bottom+o)&&e.dismiss()})}function u(){m||(n(b,function(e){e.mayAutoShow()&&"exit_intent"===e.config.trigger.method&&e.trigger()}),m=!0)}function f(e){var t=400;e.clientY<=0&&(g=window.setTimeout(u,t))}function d(){g&&(window.clearInterval(g),g=null)}var g,m,p=e("wolfy87-eventemitter"),v=Object.create(p.prototype),y=e("./Box.js")(v),w=e("./Timer.js"),b={},x=window.innerHeight,E=document.createElement("div"),L=new w(sessionStorage.getItem("boxzilla_timer")||0),S=new w(0),_=sessionStorage.getItem("boxzilla_pageviews")||0,k={start:function(){var e=sessionStorage.getItem("boxzilla_timer");e&&(L.time=e),L.start(),S.start()},stop:function(){sessionStorage.setItem("boxzilla_timer",L.time),L.stop(),S.stop()}};v.init=function(){E.id="boxzilla-overlay",document.body.appendChild(E),window.addEventListener("scroll",o(a)),window.addEventListener("resize",o(l)),window.addEventListener("load",l),window.addEventListener("mouseleave",f),window.addEventListener("mouseenter",d),window.addEventListener("keyup",r),E.addEventListener("click",h),window.setInterval(c,1e3),window.setTimeout(s,1e3),k.start(),window.addEventListener("focus",k.start),window.addEventListener("beforeunload",function(){k.stop(),sessionStorage.setItem("boxzilla_pageviews",++_)}),window.addEventListener("blur",k.stop),v.trigger("ready")},v.create=function(e,t){return b[e]=new y(e,t),b[e]},v.dismiss=function(e){"undefined"==typeof e?n(b,function(e){e.dismiss()}):"object"==typeof b[e]&&b[e].dismiss()},v.hide=function(e){"undefined"==typeof e?n(b,function(e){e.hide()}):"object"==typeof b[e]&&b[e].hide()},v.show=function(e){"undefined"==typeof e?n(b,function(e){e.show()}):"object"==typeof b[e]&&b[e].show()},v.toggle=function(e){"undefined"==typeof e?n(b,function(e){e.toggle()}):"object"==typeof b[e]&&b[e].toggle()},window.Boxzilla=v,"undefined"!=typeof t&&t.exports&&(t.exports=v)},{"./Box.js":2,"./Timer.js":4,"wolfy87-eventemitter":1}],4:[function(e,t,i){"use strict";var n=function(e){this.time=e,this.interval=0};n.prototype.tick=function(){this.time++},n.prototype.start=function(){this.interval||(this.interval=window.setInterval(this.tick.bind(this),1e3))},n.prototype.stop=function(){window.clearInterval(this.interval),this.interval=0},t.exports=n},{}]},{},[3]);
//# sourceMappingURL=boxzilla.min.js.map
