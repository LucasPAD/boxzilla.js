!function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var i=e[s][1][t];return o(i?i:t)},u,u.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){(function(){"use strict";function t(){}function i(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function n(t){return function(){return this[t].apply(this,arguments)}}var o=t.prototype,r=this,s=r.EventEmitter;o.getListeners=function(t){var e,i,n=this._getEvents();if(t instanceof RegExp){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},o.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},o.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},o.addListener=function(t,e){var n,o=this.getListenersAsObject(t),r="object"==typeof e;for(n in o)o.hasOwnProperty(n)&&-1===i(o[n],e)&&o[n].push(r?e:{listener:e,once:!1});return this},o.on=n("addListener"),o.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},o.once=n("addOnceListener"),o.defineEvent=function(t){return this.getListeners(t),this},o.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},o.removeListener=function(t,e){var n,o,r=this.getListenersAsObject(t);for(o in r)r.hasOwnProperty(o)&&(n=i(r[o],e),-1!==n&&r[o].splice(n,1));return this},o.off=n("removeListener"),o.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},o.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},o.manipulateListeners=function(t,e,i){var n,o,r=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)r.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(o=e[n])&&("function"==typeof o?r.call(this,n,o):s.call(this,n,o));return this},o.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if(t instanceof RegExp)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},o.removeAllListeners=n("removeEvent"),o.emitEvent=function(t,e){var i,n,o,r,s,a=this.getListenersAsObject(t);for(r in a)if(a.hasOwnProperty(r))for(i=a[r].slice(0),o=i.length;o--;)n=i[o],n.once===!0&&this.removeListener(t,n.listener),s=n.listener.apply(this,e||[]),s===this._getOnceReturnValue()&&this.removeListener(t,n.listener);return this},o.trigger=n("emitEvent"),o.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},o.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},o._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},o._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return r.EventEmitter=s,t},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof e&&e.exports?e.exports=t:r.EventEmitter=t}).call(this)},{}],2:[function(t,e,i){var n=function(){function t(t){return 1==t.getAttribute("data-animated")}function e(t,e){var i="none"!=t.style.display||t.offsetLeft>0,o={paddingTop:0,paddingBottom:0,height:0,opacity:0},r=t.cloneNode(!0);r.style.display="",t.setAttribute("data-animated",1),i||(t.style.display=""),"slide"===e?(i||(o=window.getComputedStyle(r),t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0),t.style.overflowY="hidden",n(t,"height",o.height),n(t,"padding-top",o.paddingTop),n(t,"padding-bottom",o.paddingBottom)):(i||(o.opacity=1,t.style.opacity=0),n(t,"opacity",o.opacity)),window.setTimeout(function(){t.removeAttribute("data-animated"),"slide"==e?(t.style.overflowY=r.style.overflowY,t.style.height=r.style.height,t.style.paddingTop=r.style.paddingTop,t.style.paddingBottom=r.style.paddingBottom):t.style.opacity=r.style.opacity,i&&(t.style.display="none")},1e3)}function i(t){return t.replace(/-([a-z])/gi,function(t,e){return e.toUpperCase()})}function n(t,e,n){var o=t.style.transition.split(", ").filter(function(t){return""!=t&&t.indexOf(e)<0});o.push(e+" 0.8s"),t.style.transition=o.join(", ");var r=i(e);window.setTimeout(function(){t.style[r]=n},0)}return{toggle:e,animated:t}}();e.exports=n},{}],3:[function(t,e,i){"use strict";function n(t,e){var i={};for(var n in t)i[n]=t[n];for(var n in e)i[n]=e[n];return i}var o,r={animation:"fade",rehide:!1,content:"",cookieTime:0,icon:"&times",minimumScreenWidth:0,position:"center",testMode:!1,trigger:!1,closable:!0},s=t("./Animator.js"),a=function(t,e){this.id=t,this.config=n(r,e),this.overlay=document.getElementById("boxzilla-overlay"),this.visible=!1,this.closed=!1,this.triggered=!1,this.triggerHeight=0,this.cookieSet=!1,this.config.trigger&&("percentage"!==this.config.trigger.method&&"element"!==this.config.trigger.method||(this.triggerHeight=this.calculateTriggerHeight()),this.cookieSet=this.isCookieSet()),this.element=this.dom(),this.events()};a.prototype.events=function(){var t=this;this.element.querySelector(".boxzilla-close-icon").addEventListener("click",t.dismiss.bind(this)),this.element.addEventListener("click",function(e){"A"===e.target.tagName&&o.trigger("box.interactions.link",[t,e.target])},!1),this.element.addEventListener("submit",function(e){t.setCookie(),o.trigger("box.interactions.form",[t,e.target])},!1),document.body.addEventListener("click",function(e){var i="#boxzilla-"+t.id;"A"===e.target.tagName&&e.target.getAttribute("href").substring(-i.length)===i&&(t.toggle(),e.preventDefault())},!1),this.fits()&&this.locationHashRefersBox()&&window.addEventListener("load",this.show.bind(this))},a.prototype.dom=function(){var t=document.createElement("div");t.className="boxzilla-container boxzilla-"+this.config.position+"-container";var e=document.createElement("div");e.setAttribute("id","boxzilla-"+this.id),e.className="boxzilla boxzilla-"+this.id+" boxzilla-"+this.config.position,e.style.display="none",t.appendChild(e);var i=document.createElement("div");i.className="boxzilla-content",i.innerHTML=this.config.content,e.appendChild(i);var n=i.querySelectorAll("script");if(n.length){for(var o=document.createElement("script"),r=0;r<n.length;r++)o.appendChild(document.createTextNode(n[r].text)),n[r].parentNode.removeChild(n[r]);document.body.appendChild(o)}if(this.config.closable&&this.config.icon){var s=document.createElement("span");s.className="boxzilla-close-icon",s.innerHTML=this.config.icon,e.appendChild(s)}return document.body.appendChild(t),e},a.prototype.setCustomBoxStyling=function(){this.element.style.overflowY="auto",this.element.style.maxHeight="none";var t=window.innerHeight,e=this.element.clientHeight;if(e>t&&(this.element.style.maxHeight=t+"px",this.element.style.overflowY="scroll"),"center"===this.config.position){var i=(t-e)/2;i=i>=0?i:0,this.element.style.marginTop=i+"px"}},a.prototype.toggle=function(t){if("undefined"==typeof t&&(t=!this.visible),t===this.visible)return!1;if(s.animated(this.element))return!1;if(!t&&!this.config.closable)return!1;this.visible=t,o.trigger("box."+(t?"show":"hide"),[this]),"center"===this.config.position&&s.toggle(this.overlay,"fade"),s.toggle(this.element,this.config.animation);var e=this.element.querySelector("input, textarea");return e&&e.focus(),!0},a.prototype.show=function(){return this.toggle(!0)},a.prototype.hide=function(){return this.toggle(!1)},a.prototype.calculateTriggerHeight=function(){var t=0;if("element"===this.config.trigger.method){var e=document.body.querySelector(this.config.trigger.value);if(e){var i=e.getBoundingClientRect();t=i.top}}else"percentage"===this.config.trigger.method&&(t=this.config.trigger.value/100*document.body.clientHeight);return t},a.prototype.setCookie=function(){if(this.config.cookieTime){var t=new Date;t.setDate(t.getDate()+this.config.cookieTime),document.cookie="boxzilla_box_"+this.id+"=true; expires="+t.toUTCString()+"; path=/"}},a.prototype.locationHashRefersBox=function(){if(!window.location.hash||0===window.location.hash.length)return!1;var t=window.location.hash.substring(1);return t===this.element.id?!0:!!this.element.querySelector("#"+t)},a.prototype.fits=function(){return this.config.minimumScreenWidth<=0?!0:window.innerWidth>this.config.minimumScreenWidth},a.prototype.mayAutoShow=function(){return this.closed?!1:this.fits()&&this.config.trigger?!this.cookieSet:!1},a.prototype.mayRehide=function(){return this.config.rehide&&this.triggered},a.prototype.isCookieSet=function(){if(this.config.testMode)return!1;if(!this.config.cookieTime)return!1;var t="true"===document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*boxzilla_box_"+this.id+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");return t},a.prototype.trigger=function(){var t=this.show();t&&(this.triggered=!0)},a.prototype.dismiss=function(){this.hide(),this.setCookie(),this.closed=!0,o.trigger("box.dismiss",[this])},e.exports=function(t){return o=t,a}},{"./Animator.js":2}],4:[function(t,e,i){"use strict";function n(t,e){for(var i in t)t.hasOwnProperty(i)&&e(t[i])}function o(t,e,i){e||(e=250);var n,o;return function(){var r=i||this,s=+new Date,a=arguments;n&&n+e>s?(clearTimeout(o),o=setTimeout(function(){n=s,t.apply(r,a)},e)):(n=s,t.apply(r,a))}}function r(t){27==t.keyCode&&L.dismiss()}function s(){n(_,function(t){t.mayAutoShow()&&"pageviews"===t.config.trigger.method&&b>=t.config.trigger.value&&t.trigger()})}function a(){n(_,function(t){t.mayAutoShow()&&("time_on_site"===t.config.trigger.method&&y.time>=t.config.trigger.value&&t.trigger(),"time_on_page"===t.config.trigger.method&&w.time>=t.config.trigger.value&&t.trigger())})}function c(){var t=window.scrollY,e=t+.667*g;n(_,function(t){!t.mayAutoShow()||t.triggerHeight<=0||(e>t.triggerHeight?t.trigger():t.mayRehide()&&t.hide())})}function l(){g=window.innerHeight,n(_,function(t){t.setCustomBoxStyling()})}function u(t){var e=t.offsetX,i=t.offsetY;n(_,function(t){var n=t.element.getBoundingClientRect(),o=100+.05*window.innerWidth;(e<n.left-o||e>n.right+o||i<n.top-o||i>n.bottom+o)&&t.dismiss()})}function d(){v||(n(_,function(t){t.mayAutoShow()&&"exit_intent"===t.config.trigger.method&&t.trigger()}),v=!0)}function f(t){var e=400;t.clientY<=0&&(m=window.setTimeout(d,e))}function h(){m&&(window.clearInterval(m),m=null)}var g,p,m,v,y,w,b,x=t("wolfy87-eventemitter"),L=Object.create(x.prototype),E=t("./Box.js")(L),S=t("./Timer.js"),_={},T={start:function(){var t=sessionStorage.getItem("boxzilla_timer");t&&(y.time=t),y.start(),w.start()},stop:function(){sessionStorage.setItem("boxzilla_timer",y.time),y.stop(),w.stop()}};L.init=function(){y=new S(sessionStorage.getItem("boxzilla_timer")||0),w=new S(0),b=sessionStorage.getItem("boxzilla_pageviews")||0,g=window.innerHeight,p=document.createElement("div"),p.style.display="none",p.id="boxzilla-overlay",document.body.appendChild(p),window.addEventListener("scroll",o(c)),window.addEventListener("resize",o(l)),window.addEventListener("load",l),window.addEventListener("mouseleave",f),window.addEventListener("mouseenter",h),window.addEventListener("keyup",r),p.addEventListener("click",u),window.setInterval(a,1e3),window.setTimeout(s,1e3),T.start(),window.addEventListener("focus",T.start),window.addEventListener("beforeunload",function(){T.stop(),sessionStorage.setItem("boxzilla_pageviews",++b)}),window.addEventListener("blur",T.stop),L.trigger("ready")},L.create=function(t,e){return _[t]=new E(t,e),_[t]},L.dismiss=function(t){"undefined"==typeof t?n(_,function(t){t.dismiss()}):"object"==typeof _[t]&&_[t].dismiss()},L.hide=function(t){"undefined"==typeof t?n(_,function(t){t.hide()}):"object"==typeof _[t]&&_[t].hide()},L.show=function(t){"undefined"==typeof t?n(_,function(t){t.show()}):"object"==typeof _[t]&&_[t].show()},L.toggle=function(t){"undefined"==typeof t?n(_,function(t){t.toggle()}):"object"==typeof _[t]&&_[t].toggle()},window.Boxzilla=L,"undefined"!=typeof e&&e.exports&&(e.exports=L)},{"./Box.js":3,"./Timer.js":5,"wolfy87-eventemitter":1}],5:[function(t,e,i){"use strict";var n=function(t){this.time=t,this.interval=0};n.prototype.tick=function(){this.time++},n.prototype.start=function(){this.interval||(this.interval=window.setInterval(this.tick.bind(this),1e3))},n.prototype.stop=function(){window.clearInterval(this.interval),this.interval=0},e.exports=n},{}]},{},[4]);
//# sourceMappingURL=boxzilla.min.js.map
