{"version":3,"sources":["boxzilla.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","duration","css","element","styles","property","hasOwnProperty","style","animate","targetStyles","fn","last","Date","initialStyles","window","getComputedStyle","currentStyles","propSteps","parseFloat","to","current","tick","step","increment","newValue","timeSinceLastTick","done","_property","suffix","requestAnimationFrame","setTimeout","toggle","animation","callbackFn","cleanup","removeAttribute","setAttribute","clone","getAttribute","display","nowVisible","hiddenStyles","visibleStyles","offsetLeft","cloneNode","properties","value","newObject","initObjectProperties","object","copyObjectProperties","isFinite","height","clientRect","getBoundingClientRect","overflowY","opacity","animated","2","defaults","rehide","content","cookie","icon","screenWidthCondition","position","testMode","trigger","closable","Animator","Box","id","config","fireEvent","this","obj1","obj2","obj3","attrname","_attrname","merge","overlay","document","createElement","classList","add","body","appendChild","visible","dismissed","triggered","triggerHeight","calculateTriggerHeight","cookieSet","isCookieSet","contentElement","closeIcon","dom","events","prototype","box","addEventListener","evt","preventDefault","dismiss","target","tagName","setCookie","x","offsetX","y","offsetY","rect","left","right","top","bottom","wrapper","className","innerHTML","setCustomBoxStyling","origDisplay","maxHeight","windowHeight","innerHeight","boxHeight","clientHeight","newTopMargin","marginTop","show","bind","hide","html","method","triggerElement","querySelector","documentElement","Math","max","scrollHeight","offsetHeight","fits","condition","innerWidth","onResize","mayAutoShow","mayRehide","replace","RegExp","hours","expiryDate","setHours","getHours","toUTCString","./animator.js","3","throttle","ExitIntent","Scroll","Pageviews","Time","initialised","boxes","listeners","onKeyUp","keyCode","recalculateHeights","forEach","onElementClick","el","parentElement","href","match","event","args","apply","get","String","Boxzilla","off","filter","on","push","init","styleElement","head","create","opts","minimumScreenWidth","./box.js","./styles.js","./triggers/exit-intent.js","./triggers/pageviews.js","./triggers/scroll.js","./triggers/time.js","./util.js","4","5","Timer","start","time","interval","setInterval","stop","clearInterval","6","timeout","touchStart","removeEventListener","onMouseLeave","onMouseEnter","clearTimeout","onTouchStart","onTouchEnd","clientY","documentMode","test","navigator","userAgent","clientX","timestamp","performance","now","scrollY","indexOf","7","pageviews","sessionStorage","getItem","setItem","8","checkHeightCriteria","pageYOffset","scrollTop","../util.js","9","siteTimer","pageTimer","timers","sessionTime","parseInt","hidden","../timer.js","10","threshold","scope","deferTimer","context","arguments"],"mappings":"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","file":"boxzilla.min.js","sourcesContent":["\"use strict\";\n\n(function () {\n  function r(e, n, t) {\n    function o(i, f) {\n      if (!n[i]) {\n        if (!e[i]) {\n          var c = \"function\" == typeof require && require;\n          if (!f && c) return c(i, !0);\n          if (u) return u(i, !0);\n          var a = new Error(\"Cannot find module '\" + i + \"'\");\n          throw a.code = \"MODULE_NOT_FOUND\", a;\n        }\n\n        var p = n[i] = {\n          exports: {}\n        };\n        e[i][0].call(p.exports, function (r) {\n          var n = e[i][1][r];\n          return o(n || r);\n        }, p, p.exports, r, e, n, t);\n      }\n\n      return n[i].exports;\n    }\n\n    for (var u = \"function\" == typeof require && require, i = 0; i < t.length; i++) {\n      o(t[i]);\n    }\n\n    return o;\n  }\n\n  return r;\n})()({\n  1: [function (require, module, exports) {\n    'use strict';\n\n    var duration = 320;\n\n    function css(element, styles) {\n      for (var property in styles) {\n        if (!styles.hasOwnProperty(property)) {\n          continue;\n        }\n\n        element.style[property] = styles[property];\n      }\n    }\n\n    function initObjectProperties(properties, value) {\n      var newObject = {};\n\n      for (var i = 0; i < properties.length; i++) {\n        newObject[properties[i]] = value;\n      }\n\n      return newObject;\n    }\n\n    function copyObjectProperties(properties, object) {\n      var newObject = {};\n\n      for (var i = 0; i < properties.length; i++) {\n        newObject[properties[i]] = object[properties[i]];\n      }\n\n      return newObject;\n    }\n    /**\n     * Checks if the given element is currently being animated.\n     *\n     * @param element\n     * @returns {boolean}\n     */\n\n\n    function animated(element) {\n      return !!element.getAttribute('data-animated');\n    }\n    /**\n     * Toggles the element using the given animation.\n     *\n     * @param element\n     * @param animation Either \"fade\" or \"slide\"\n     * @param callbackFn\n     */\n\n\n    function toggle(element, animation, callbackFn) {\n      var nowVisible = element.style.display !== 'none' || element.offsetLeft > 0; // create clone for reference\n\n      var clone = element.cloneNode(true);\n\n      var cleanup = function cleanup() {\n        element.removeAttribute('data-animated');\n        element.setAttribute('style', clone.getAttribute('style'));\n        element.style.display = nowVisible ? 'none' : '';\n\n        if (callbackFn) {\n          callbackFn();\n        }\n      }; // store attribute so everyone knows we're animating this element\n\n\n      element.setAttribute('data-animated', \"true\"); // toggle element visiblity right away if we're making something visible\n\n      if (!nowVisible) {\n        element.style.display = '';\n      }\n\n      var hiddenStyles;\n      var visibleStyles; // animate properties\n\n      if (animation === 'slide') {\n        hiddenStyles = initObjectProperties([\"height\", \"borderTopWidth\", \"borderBottomWidth\", \"paddingTop\", \"paddingBottom\"], 0);\n        visibleStyles = {};\n\n        if (!nowVisible) {\n          var computedStyles = window.getComputedStyle(element);\n          visibleStyles = copyObjectProperties([\"height\", \"borderTopWidth\", \"borderBottomWidth\", \"paddingTop\", \"paddingBottom\"], computedStyles); // in some browsers, getComputedStyle returns \"auto\" value. this falls back to getBoundingClientRect() in those browsers since we need an actual height.\n\n          if (!isFinite(visibleStyles.height)) {\n            var clientRect = element.getBoundingClientRect();\n            visibleStyles.height = clientRect.height;\n          }\n\n          css(element, hiddenStyles);\n        } // don't show a scrollbar during animation\n\n\n        element.style.overflowY = 'hidden';\n        animate(element, nowVisible ? hiddenStyles : visibleStyles, cleanup);\n      } else {\n        hiddenStyles = {\n          opacity: 0\n        };\n        visibleStyles = {\n          opacity: 1\n        };\n\n        if (!nowVisible) {\n          css(element, hiddenStyles);\n        }\n\n        animate(element, nowVisible ? hiddenStyles : visibleStyles, cleanup);\n      }\n    }\n\n    function animate(element, targetStyles, fn) {\n      var last = +new Date();\n      var initialStyles = window.getComputedStyle(element);\n      var currentStyles = {};\n      var propSteps = {};\n\n      for (var property in targetStyles) {\n        if (!targetStyles.hasOwnProperty(property)) {\n          continue;\n        } // make sure we have an object filled with floats\n\n\n        targetStyles[property] = parseFloat(targetStyles[property]); // calculate step size & current value\n\n        var to = targetStyles[property];\n        var current = parseFloat(initialStyles[property]); // is there something to do?\n\n        if (current == to) {\n          delete targetStyles[property];\n          continue;\n        }\n\n        propSteps[property] = (to - current) / duration; // points per second\n\n        currentStyles[property] = current;\n      }\n\n      var tick = function tick() {\n        var now = +new Date();\n        var timeSinceLastTick = now - last;\n        var done = true;\n        var step, to, increment, newValue;\n\n        for (var _property in targetStyles) {\n          if (!targetStyles.hasOwnProperty(_property)) {\n            continue;\n          }\n\n          step = propSteps[_property];\n          to = targetStyles[_property];\n          increment = step * timeSinceLastTick;\n          newValue = currentStyles[_property] + increment;\n\n          if (step > 0 && newValue >= to || step < 0 && newValue <= to) {\n            newValue = to;\n          } else {\n            done = false;\n          } // store new value\n\n\n          currentStyles[_property] = newValue;\n          var suffix = _property !== \"opacity\" ? \"px\" : \"\";\n          element.style[_property] = newValue + suffix;\n        }\n\n        last = +new Date(); // keep going until we're done for all props\n\n        if (!done) {\n          window.requestAnimationFrame && requestAnimationFrame(tick) || setTimeout(tick, 32);\n        } else {\n          // call callback\n          fn && fn();\n        }\n      };\n\n      tick();\n    }\n\n    module.exports = {\n      'toggle': toggle,\n      'animate': animate,\n      'animated': animated\n    };\n  }, {}],\n  2: [function (require, module, exports) {\n    var defaults = {\n      'animation': 'fade',\n      'rehide': false,\n      'content': '',\n      'cookie': null,\n      'icon': '&times',\n      'screenWidthCondition': null,\n      'position': 'center',\n      'testMode': false,\n      'trigger': false,\n      'closable': true\n    };\n\n    var Animator = require('./animator.js');\n    /**\n    * Merge 2 objects, values of the latter overwriting the former.\n    *\n    * @param obj1\n    * @param obj2\n    * @returns {*}\n    */\n\n\n    function merge(obj1, obj2) {\n      var obj3 = {}; // add obj1 to obj3\n\n      for (var attrname in obj1) {\n        if (obj1.hasOwnProperty(attrname)) {\n          obj3[attrname] = obj1[attrname];\n        }\n      } // add obj2 to obj3\n\n\n      for (var _attrname in obj2) {\n        if (obj2.hasOwnProperty(_attrname)) {\n          obj3[_attrname] = obj2[_attrname];\n        }\n      }\n\n      return obj3;\n    }\n    /**\n    * Get the real height of entire document.\n    * @returns {number}\n    */\n\n\n    function getDocumentHeight() {\n      var body = document.body;\n      var html = document.documentElement;\n      return Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n    } // Box Object\n\n\n    function Box(id, config, fireEvent) {\n      this.id = id;\n      this.fireEvent = fireEvent; // store config values\n\n      this.config = merge(defaults, config); // add overlay element to dom and store ref to overlay\n\n      this.overlay = document.createElement('div');\n      this.overlay.style.display = 'none';\n      this.overlay.id = 'boxzilla-overlay-' + this.id;\n      this.overlay.classList.add('boxzilla-overlay');\n      document.body.appendChild(this.overlay); // state\n\n      this.visible = false;\n      this.dismissed = false;\n      this.triggered = false;\n      this.triggerHeight = this.calculateTriggerHeight();\n      this.cookieSet = this.isCookieSet();\n      this.element = null;\n      this.contentElement = null;\n      this.closeIcon = null; // create dom elements for this box\n\n      this.dom(); // further initialise the box\n\n      this.events();\n    } // initialise the box\n\n\n    Box.prototype.events = function () {\n      var box = this; // attach event to \"close\" icon inside box\n\n      if (this.closeIcon) {\n        this.closeIcon.addEventListener('click', function (evt) {\n          evt.preventDefault();\n          box.dismiss();\n        });\n      }\n\n      this.element.addEventListener('click', function (evt) {\n        if (evt.target.tagName === 'A') {\n          this.fireEvent('box.interactions.link', [box, evt.target]);\n        }\n      }, false);\n      this.element.addEventListener('submit', function (evt) {\n        box.setCookie();\n        this.fireEvent('box.interactions.form', [box, evt.target]);\n      }, false);\n      this.overlay.addEventListener('click', function (e) {\n        var x = e.offsetX,\n            y = e.offsetY; // calculate if click was less than 40px outside box to avoid closing it by accident\n\n        var rect = box.element.getBoundingClientRect();\n        var margin = 40; // if click was not anywhere near box, dismiss it.\n\n        if (x < rect.left - margin || x > rect.right + margin || y < rect.top - margin || y > rect.bottom + margin) {\n          box.dismiss();\n        }\n      });\n    }; // generate dom elements for this box\n\n\n    Box.prototype.dom = function () {\n      var wrapper = document.createElement('div');\n      wrapper.className = 'boxzilla-container boxzilla-' + this.config.position + '-container';\n      var box = document.createElement('div');\n      box.id = 'boxzilla-' + this.id;\n      box.className = 'boxzilla boxzilla-' + this.id + ' boxzilla-' + this.config.position;\n      box.style.display = 'none';\n      wrapper.appendChild(box);\n      var content;\n\n      if (typeof this.config.content === \"string\") {\n        content = document.createElement('div');\n        content.innerHTML = this.config.content;\n      } else {\n        content = this.config.content; // make sure element is visible\n\n        content.style.display = '';\n      }\n\n      content.className = 'boxzilla-content';\n      box.appendChild(content);\n\n      if (this.config.closable && this.config.icon) {\n        var closeIcon = document.createElement('span');\n        closeIcon.className = \"boxzilla-close-icon\";\n        closeIcon.innerHTML = this.config.icon;\n        box.appendChild(closeIcon);\n        this.closeIcon = closeIcon;\n      }\n\n      document.body.appendChild(wrapper);\n      this.contentElement = content;\n      this.element = box;\n    }; // set (calculate) custom box styling depending on box options\n\n\n    Box.prototype.setCustomBoxStyling = function () {\n      // reset element to its initial state\n      var origDisplay = this.element.style.display;\n      this.element.style.display = '';\n      this.element.style.overflowY = '';\n      this.element.style.maxHeight = ''; // get new dimensions\n\n      var windowHeight = window.innerHeight;\n      var boxHeight = this.element.clientHeight; // add scrollbar to box and limit height\n\n      if (boxHeight > windowHeight) {\n        this.element.style.maxHeight = windowHeight + \"px\";\n        this.element.style.overflowY = 'scroll';\n      } // set new top margin for boxes which are centered\n\n\n      if (this.config.position === 'center') {\n        var newTopMargin = (windowHeight - boxHeight) / 2;\n        newTopMargin = newTopMargin >= 0 ? newTopMargin : 0;\n        this.element.style.marginTop = newTopMargin + \"px\";\n      }\n\n      this.element.style.display = origDisplay;\n    }; // toggle visibility of the box\n\n\n    Box.prototype.toggle = function (show, animate) {\n      show = typeof show === \"undefined\" ? !this.visible : show;\n      animate = typeof animate === \"undefined\" ? true : animate; // is box already at desired visibility?\n\n      if (show === this.visible) {\n        return false;\n      } // is box being animated?\n\n\n      if (Animator.animated(this.element)) {\n        return false;\n      } // if box should be hidden but is not closable, bail.\n\n\n      if (!show && !this.config.closable) {\n        return false;\n      } // set new visibility status\n\n\n      this.visible = show; // calculate new styling rules\n\n      this.setCustomBoxStyling(); // trigger event\n\n      this.fireEvent('box.' + (show ? 'show' : 'hide'), [this]); // show or hide box using selected animation\n\n      if (this.config.position === 'center') {\n        this.overlay.classList.toggle('boxzilla-' + this.id + '-overlay');\n\n        if (animate) {\n          Animator.toggle(this.overlay, \"fade\");\n        } else {\n          this.overlay.style.display = show ? '' : 'none';\n        }\n      }\n\n      if (animate) {\n        Animator.toggle(this.element, this.config.animation, function () {\n          if (this.visible) {\n            return;\n          }\n\n          this.contentElement.innerHTML = this.contentElement.innerHTML;\n        }.bind(this));\n      } else {\n        this.element.style.display = show ? '' : 'none';\n      }\n\n      return true;\n    }; // show the box\n\n\n    Box.prototype.show = function (animate) {\n      return this.toggle(true, animate);\n    }; // hide the box\n\n\n    Box.prototype.hide = function (animate) {\n      return this.toggle(false, animate);\n    }; // calculate trigger height\n\n\n    Box.prototype.calculateTriggerHeight = function () {\n      var triggerHeight = 0;\n\n      if (this.config.trigger) {\n        if (this.config.trigger.method === 'element') {\n          var triggerElement = document.body.querySelector(this.config.trigger.value);\n\n          if (triggerElement) {\n            var offset = triggerElement.getBoundingClientRect();\n            triggerHeight = offset.top;\n          }\n        } else if (this.config.trigger.method === 'percentage') {\n          triggerHeight = this.config.trigger.value / 100 * getDocumentHeight();\n        }\n      }\n\n      return triggerHeight;\n    };\n\n    Box.prototype.fits = function () {\n      if (!this.config.screenWidthCondition || !this.config.screenWidthCondition.value) {\n        return true;\n      }\n\n      switch (this.config.screenWidthCondition.condition) {\n        case \"larger\":\n          return window.innerWidth > this.config.screenWidthCondition.value;\n\n        case \"smaller\":\n          return window.innerWidth < this.config.screenWidthCondition.value;\n      } // meh.. condition should be \"smaller\" or \"larger\", just return true.\n\n\n      return true;\n    };\n\n    Box.prototype.onResize = function () {\n      this.triggerHeight = this.calculateTriggerHeight();\n      this.setCustomBoxStyling();\n    }; // is this box enabled?\n\n\n    Box.prototype.mayAutoShow = function () {\n      if (this.dismissed) {\n        return false;\n      } // check if box fits on given minimum screen width\n\n\n      if (!this.fits()) {\n        return false;\n      } // if trigger empty or error in calculating triggerHeight, return false\n\n\n      if (!this.config.trigger) {\n        return false;\n      } // rely on cookie value (show if not set, don't show if set)\n\n\n      return !this.cookieSet;\n    };\n\n    Box.prototype.mayRehide = function () {\n      return this.config.rehide && this.triggered;\n    };\n\n    Box.prototype.isCookieSet = function () {\n      // always show on test mode or when no auto-trigger is configured\n      if (this.config.testMode || !this.config.trigger) {\n        return false;\n      } // if either cookie is null or trigger & dismiss are both falsey, don't bother checking.\n\n\n      if (!this.config.cookie || !this.config.cookie.triggered && !this.config.cookie.dismissed) {\n        return false;\n      }\n\n      return document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + 'boxzilla_box_' + this.id + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\") === \"true\";\n      ;\n    }; // set cookie that disables automatically showing the box\n\n\n    Box.prototype.setCookie = function (hours) {\n      var expiryDate = new Date();\n      expiryDate.setHours(expiryDate.getHours() + hours);\n      document.cookie = 'boxzilla_box_' + this.id + '=true; expires=' + expiryDate.toUTCString() + '; path=/';\n    };\n\n    Box.prototype.trigger = function () {\n      var shown = this.show();\n\n      if (!shown) {\n        return;\n      }\n\n      this.triggered = true;\n\n      if (this.config.cookie && this.config.cookie.triggered) {\n        this.setCookie(this.config.cookie.triggered);\n      }\n    };\n    /**\n    * Dismisses the box and optionally sets a cookie.\n    * @param animate\n    * @returns {boolean}\n    */\n\n\n    Box.prototype.dismiss = function (animate) {\n      // only dismiss box if it's currently open.\n      if (!this.visible) {\n        return false;\n      } // hide box element\n\n\n      this.hide(animate); // set cookie\n\n      if (this.config.cookie && this.config.cookie.dismissed) {\n        this.setCookie(this.config.cookie.dismissed);\n      }\n\n      this.dismissed = true;\n      this.fireEvent('box.dismiss', [this]);\n      return true;\n    };\n\n    module.exports = Box;\n  }, {\n    \"./animator.js\": 1\n  }],\n  3: [function (require, module, exports) {\n    'use strict';\n\n    var Box = require('./box.js');\n\n    var throttle = require('./util.js').throttle;\n\n    var styles = require('./styles.js');\n\n    var ExitIntent = require('./triggers/exit-intent.js');\n\n    var Scroll = require('./triggers/scroll.js');\n\n    var Pageviews = require('./triggers/pageviews.js');\n\n    var Time = require('./triggers/time.js');\n\n    var initialised = false;\n    var boxes = [];\n    var listeners = {}; // \"keyup\" listener\n\n    function onKeyUp(evt) {\n      if (evt.keyCode === 27) {\n        dismiss();\n      }\n    } // recalculate heights and variables based on height\n\n\n    function recalculateHeights() {\n      boxes.forEach(function (box) {\n        return box.onResize();\n      });\n    }\n\n    function onElementClick(evt) {\n      var el = evt.target; // bubble up to <a> element\n\n      for (var i = 0; i <= 3; i++) {\n        if (!el || el.tagName === 'A') {\n          break;\n        }\n\n        el = el.parentElement;\n      }\n\n      if (!el || el.tagName !== 'A' || !el.href) {\n        return;\n      }\n\n      var match = el.href.match(/[#&]boxzilla-(.+)/i);\n\n      if (match && match.length > 1) {\n        toggle(match[1]);\n      }\n    }\n\n    function trigger(event, args) {\n      listeners[event] && listeners[event].forEach(function (f) {\n        return f.apply(null, args);\n      });\n    }\n\n    function on(event, fn) {\n      listeners[event] = listeners[event] || [];\n      listeners[event].push(fn);\n    }\n\n    function off(event, fn) {\n      listeners[event] && listeners[event].filter(function (f) {\n        return f !== fn;\n      });\n    } // initialise & add event listeners\n\n\n    function init() {\n      if (initialised) {\n        return;\n      } // insert styles into DOM\n\n\n      var styleElement = document.createElement('style');\n      styleElement.innerHTML = styles;\n      document.head.appendChild(styleElement); // init triggers\n\n      new ExitIntent(boxes);\n      new Pageviews(boxes);\n      new Scroll(boxes);\n      new Time(boxes);\n      document.body.addEventListener('click', onElementClick, true);\n      window.addEventListener('resize', throttle(recalculateHeights));\n      window.addEventListener('load', recalculateHeights);\n      document.addEventListener('keyup', onKeyUp);\n      trigger('ready');\n      initialised = true; // ensure this function doesn't run again\n    }\n\n    function create(id, opts) {\n      // preserve backwards compat for minimumScreenWidth option\n      if (typeof opts.minimumScreenWidth !== \"undefined\") {\n        opts.screenWidthCondition = {\n          condition: \"larger\",\n          value: opts.minimumScreenWidth\n        };\n      }\n\n      var box = new Box(id, opts, trigger);\n      boxes.push(box);\n      return box;\n    }\n\n    function get(id) {\n      for (var i = 0; i < boxes.length; i++) {\n        if (String(boxes[i].id) === String(id)) {\n          return boxes[i];\n        }\n      }\n\n      throw new Error(\"No box exists with ID \" + id);\n    } // dismiss a single box (or all by omitting id param)\n\n\n    function dismiss(id, animate) {\n      // if no id given, dismiss all current open boxes\n      if (id) {\n        get(id).dismiss(animate);\n      } else {\n        boxes.forEach(function (box) {\n          return box.dismiss(animate);\n        });\n      }\n    }\n\n    function hide(id, animate) {\n      if (id) {\n        get(id).hide(animate);\n      } else {\n        boxes.forEach(function (box) {\n          return box.hide(animate);\n        });\n      }\n    }\n\n    function show(id, animate) {\n      if (id) {\n        get(id).show(animate);\n      } else {\n        boxes.forEach(function (box) {\n          return box.show(animate);\n        });\n      }\n    }\n\n    function toggle(id, animate) {\n      if (id) {\n        get(id).toggle(animate);\n      } else {\n        boxes.forEach(function (box) {\n          return box.toggle(animate);\n        });\n      }\n    } // expose boxzilla object\n\n\n    var Boxzilla = {\n      off: off,\n      on: on,\n      get: get,\n      init: init,\n      create: create,\n      trigger: trigger,\n      show: show,\n      hide: hide,\n      dismiss: dismiss,\n      toggle: toggle,\n      boxes: boxes\n    };\n    window.Boxzilla = Boxzilla;\n\n    if (typeof module !== 'undefined' && module.exports) {\n      module.exports = Boxzilla;\n    }\n  }, {\n    \"./box.js\": 2,\n    \"./styles.js\": 4,\n    \"./triggers/exit-intent.js\": 6,\n    \"./triggers/pageviews.js\": 7,\n    \"./triggers/scroll.js\": 8,\n    \"./triggers/time.js\": 9,\n    \"./util.js\": 10\n  }],\n  4: [function (require, module, exports) {\n    var styles = \"#boxzilla-overlay,.boxzilla-overlay{position:fixed;background:rgba(0,0,0,.65);width:100%;height:100%;left:0;top:0;z-index:10000}.boxzilla-center-container{position:fixed;top:0;left:0;right:0;height:0;text-align:center;z-index:11000;line-height:0}.boxzilla-center-container .boxzilla{display:inline-block;text-align:left;position:relative;line-height:normal}.boxzilla{position:fixed;z-index:12000;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;background:#fff;padding:25px}.boxzilla.boxzilla-top-left{top:0;left:0}.boxzilla.boxzilla-top-right{top:0;right:0}.boxzilla.boxzilla-bottom-left{bottom:0;left:0}.boxzilla.boxzilla-bottom-right{bottom:0;right:0}.boxzilla-content>:first-child{margin-top:0;padding-top:0}.boxzilla-content>:last-child{margin-bottom:0;padding-bottom:0}.boxzilla-close-icon{position:absolute;right:0;top:0;text-align:center;padding:6px;cursor:pointer;-webkit-appearance:none;font-size:28px;font-weight:700;line-height:20px;color:#000;opacity:.5}.boxzilla-close-icon:focus,.boxzilla-close-icon:hover{opacity:.8}\";\n    module.exports = styles;\n  }, {}],\n  5: [function (require, module, exports) {\n    var Timer = function Timer(start) {\n      this.time = start;\n      this.interval = 0;\n    };\n\n    Timer.prototype.tick = function () {\n      this.time++;\n    };\n\n    Timer.prototype.start = function () {\n      if (!this.interval) {\n        this.interval = window.setInterval(this.tick.bind(this), 1000);\n      }\n    };\n\n    Timer.prototype.stop = function () {\n      if (this.interval) {\n        window.clearInterval(this.interval);\n        this.interval = 0;\n      }\n    };\n\n    module.exports = Timer;\n  }, {}],\n  6: [function (require, module, exports) {\n    module.exports = function (boxes) {\n      var timeout = null;\n      var touchStart = {};\n\n      function trigger() {\n        document.documentElement.removeEventListener('mouseleave', onMouseLeave);\n        document.documentElement.removeEventListener('mouseenter', onMouseEnter);\n        document.documentElement.removeEventListener('click', clearTimeout);\n        window.removeEventListener('touchstart', onTouchStart);\n        window.removeEventListener('touchend', onTouchEnd); // show boxes with exit intent trigger\n\n        boxes.forEach(function (box) {\n          if (box.mayAutoShow() && box.config.trigger.method === 'exit_intent') {\n            box.trigger();\n          }\n        });\n      }\n\n      function clearTimeout() {\n        if (timeout === null) {\n          return;\n        }\n\n        window.clearTimeout(timeout);\n        timeout = null;\n      }\n\n      function onMouseEnter(evt) {\n        clearTimeout();\n      }\n\n      function getAddressBarY() {\n        if (document.documentMode || /Edge\\//.test(navigator.userAgent)) {\n          return 5;\n        }\n\n        return 0;\n      }\n\n      function onMouseLeave(evt) {\n        clearTimeout(); // did mouse leave at top of window?\n        // add small exception space in the top-right corner\n\n        if (evt.clientY <= getAddressBarY() && evt.clientX < 0.80 * window.innerWidth) {\n          timeout = window.setTimeout(trigger, 400);\n        }\n      }\n\n      function onTouchStart(evt) {\n        clearTimeout();\n        touchStart = {\n          timestamp: performance.now(),\n          scrollY: window.scrollY,\n          windowHeight: window.innerHeight\n        };\n      }\n\n      function onTouchEnd(evt) {\n        clearTimeout(); // did address bar appear?\n\n        if (window.innerHeight > touchStart.windowHeight) {\n          return;\n        } // allow a tiny tiny margin for error, to not fire on clicks\n\n\n        if (window.scrollY + 20 >= touchStart.scrollY) {\n          return;\n        }\n\n        if (performance.now() - touchStart.timestamp > 300) {\n          return;\n        }\n\n        if (['A', 'INPUT', 'BUTTON'].indexOf(evt.target.tagName) > -1) {\n          return;\n        }\n\n        timeout = window.setTimeout(trigger, 800);\n      }\n\n      window.addEventListener('touchstart', onTouchStart);\n      window.addEventListener('touchend', onTouchEnd);\n      document.documentElement.addEventListener('mouseenter', onMouseEnter);\n      document.documentElement.addEventListener('mouseleave', onMouseLeave);\n      document.documentElement.addEventListener('click', clearTimeout);\n    };\n  }, {}],\n  7: [function (require, module, exports) {\n    module.exports = function (boxes) {\n      var pageviews;\n\n      try {\n        pageviews = sessionStorage.getItem('boxzilla_pageviews') || 0;\n        sessionStorage.setItem('boxzilla_pageviews', ++pageviews);\n      } catch (e) {\n        pageviews = 0;\n      }\n\n      window.setTimeout(function () {\n        boxes.forEach(function (box) {\n          if (box.config.trigger.method === 'pageviews' && pageviews >= box.config.trigger.value && box.mayAutoShow()) {\n            box.trigger();\n          }\n        });\n      }, 1000);\n    };\n  }, {}],\n  8: [function (require, module, exports) {\n    var throttle = require('../util.js').throttle;\n\n    module.exports = function (boxes) {\n      // check triggerHeight criteria for all boxes\n      function checkHeightCriteria() {\n        var scrollY = window.hasOwnProperty('pageYOffset') ? window.pageYOffset : window.scrollTop;\n        scrollY = scrollY + window.innerHeight * 0.9;\n        boxes.forEach(function (box) {\n          if (!box.mayAutoShow() || box.triggerHeight <= 0) {\n            return;\n          }\n\n          if (scrollY > box.triggerHeight) {\n            box.trigger();\n          } else if (box.mayRehide() && scrollY < box.triggerHeight - 5) {\n            // if box may auto-hide and scrollY is less than triggerHeight (with small margin of error), hide box\n            box.hide();\n          }\n        });\n      }\n\n      window.addEventListener('touchstart', throttle(checkHeightCriteria), true);\n      window.addEventListener('scroll', throttle(checkHeightCriteria), true);\n    };\n  }, {\n    \"../util.js\": 10\n  }],\n  9: [function (require, module, exports) {\n    var Timer = require('../timer.js');\n\n    module.exports = function (boxes) {\n      var siteTimer = new Timer(0);\n      var pageTimer = new Timer(0);\n      var timers = {\n        start: function start() {\n          try {\n            var sessionTime = parseInt(sessionStorage.getItem('boxzilla_timer'));\n\n            if (sessionTime) {\n              siteTimer.time = sessionTime;\n            }\n          } catch (e) {}\n\n          siteTimer.start();\n          pageTimer.start();\n        },\n        stop: function stop() {\n          sessionStorage.setItem('boxzilla_timer', siteTimer.time);\n          siteTimer.stop();\n          pageTimer.stop();\n        }\n      }; // start timers\n\n      timers.start(); // stop timers when leaving page or switching to other tab\n\n      document.addEventListener(\"visibilitychange\", function () {\n        document.hidden ? timers.stop() : timers.start();\n      });\n      window.addEventListener('beforeunload', function () {\n        timers.stop();\n      });\n      window.setInterval(function () {\n        boxes.forEach(function (box) {\n          if (box.config.trigger.method === 'time_on_site' && siteTimer.time >= box.config.trigger.value && box.mayAutoShow()) {\n            box.trigger();\n          }\n\n          if (box.config.trigger.method === 'time_on_page' && pageTimer.time >= box.config.trigger.value && box.mayAutoShow()) {\n            box.trigger();\n          }\n        });\n      }, 1000);\n    };\n  }, {\n    \"../timer.js\": 5\n  }],\n  10: [function (require, module, exports) {\n    function throttle(fn, threshold, scope) {\n      threshold || (threshold = 800);\n      var last;\n      var deferTimer;\n      return function () {\n        var context = scope || this;\n        var now = +new Date();\n        var args = arguments;\n\n        if (last && now < last + threshold) {\n          // hold on to it\n          clearTimeout(deferTimer);\n          deferTimer = setTimeout(function () {\n            last = now;\n            fn.apply(context, args);\n          }, threshold);\n        } else {\n          last = now;\n          fn.apply(context, args);\n        }\n      };\n    }\n\n    module.exports = {\n      throttle: throttle\n    };\n  }, {}]\n}, {}, [3]);"]}